"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[665],{3665:(Z,C,n)=>{n.r(C),n.d(C,{HealthModule:()=>B});var p=n(177),I=n(8498),E=n(3955),r=n(9417),c=n(9159),f=n(8834),D=n(9213),d=n(5351),h=n(2102),v=n(9631),R=n(2798),u=n(5084),k=n(6471),j=n(9183),t=n(7705),m=n(9967),F=n(6354),g=n(8455);let T=(()=>{class e{constructor(o){this.firestore=o,this.collectionName="health_records"}getAllRecords(){const o=(0,m.rJ)(this.firestore,this.collectionName);return(0,m.xs)(o,{idField:"id"}).pipe((0,F.T)(a=>({records:a})))}getActiveRecords(){const o=(0,m.rJ)(this.firestore,this.collectionName);return(0,m.xs)(o,{idField:"id"}).pipe((0,F.T)(a=>({records:a.filter(l=>"ACTIVE"===l.status)})))}getRecordById(o){const a=(0,m.H9)(this.firestore,`${this.collectionName}/${o}`);return(0,m.Bg)(a,{idField:"id"}).pipe((0,F.T)(i=>i))}createRecord(o){const a=(0,m.rJ)(this.firestore,this.collectionName);return(0,g.H)((0,m.gS)(a,{...o,created_at:new Date,updated_at:new Date}))}updateRecord(o,a){const i=(0,m.H9)(this.firestore,`${this.collectionName}/${o}`);return(0,g.H)((0,m.mZ)(i,{...a,updated_at:new Date}))}addTreatment(o,a){return(0,g.H)(Promise.resolve())}static{this.\u0275fac=function(a){return new(a||e)(t.KVO(m._7))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var H=n(6600);let b=(()=>{class e{constructor(o,a,i,l){this.fb=o,this.healthService=a,this.dialogRef=i,this.data=l,this.isEdit=!1,this.loading=!1,this.form=this.fb.group({ear_tag:["",r.k0.required],diagnosis:["",r.k0.required],diagnosis_date:[new Date,r.k0.required],severity:["MILD",r.k0.required],status:["ACTIVE",r.k0.required],notes:[""]}),l&&(this.isEdit=!0,this.form.patchValue(l))}ngOnInit(){}onSubmit(){if(this.form.valid){this.loading=!0;const o=this.form.value;let a;a=this.isEdit?this.healthService.updateRecord(this.data.id,o):this.healthService.createRecord(o),a.subscribe({next:()=>{this.loading=!1,this.dialogRef.close(!0)},error:i=>{console.error(i),this.loading=!1}})}}static{this.\u0275fac=function(a){return new(a||e)(t.rXU(r.ok),t.rXU(T),t.rXU(d.CP),t.rXU(d.Vh))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-health-form"]],decls:50,vars:9,consts:[["mat-dialog-title",""],[3,"formGroup"],[1,"form-container"],["appearance","fill"],["matInput","","formControlName","ear_tag"],["matInput","","formControlName","diagnosis"],["matInput","","formControlName","diagnosis_date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","severity"],["value","MILD"],["value","MODERATE"],["value","SEVERE"],["formControlName","status"],["value","ACTIVE"],["value","RECOVERED"],["value","DECEASED"],["matInput","","formControlName","notes"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(a,i){if(1&a&&(t.j41(0,"h2",0),t.EFF(1),t.nI1(2,"translate"),t.nI1(3,"translate"),t.k0s(),t.j41(4,"mat-dialog-content",1)(5,"div",2)(6,"mat-form-field",3)(7,"mat-label"),t.EFF(8,"ID (Ear Tag)"),t.k0s(),t.nrm(9,"input",4),t.k0s(),t.j41(10,"mat-form-field",3)(11,"mat-label"),t.EFF(12,"Diagnostic"),t.k0s(),t.nrm(13,"input",5),t.k0s(),t.j41(14,"mat-form-field",3)(15,"mat-label"),t.EFF(16,"Date"),t.k0s(),t.nrm(17,"input",6)(18,"mat-datepicker-toggle",7)(19,"mat-datepicker",null,8),t.k0s(),t.j41(21,"mat-form-field",3)(22,"mat-label"),t.EFF(23,"S\xe9v\xe9rit\xe9"),t.k0s(),t.j41(24,"mat-select",9)(25,"mat-option",10),t.EFF(26,"L\xe9ger"),t.k0s(),t.j41(27,"mat-option",11),t.EFF(28,"Mod\xe9r\xe9"),t.k0s(),t.j41(29,"mat-option",12),t.EFF(30,"S\xe9v\xe8re"),t.k0s()()(),t.j41(31,"mat-form-field",3)(32,"mat-label"),t.EFF(33,"Statut"),t.k0s(),t.j41(34,"mat-select",13)(35,"mat-option",14),t.EFF(36,"Actif"),t.k0s(),t.j41(37,"mat-option",15),t.EFF(38,"Gu\xe9ri"),t.k0s(),t.j41(39,"mat-option",16),t.EFF(40,"D\xe9c\xe9d\xe9"),t.k0s()()(),t.j41(41,"mat-form-field",3)(42,"mat-label"),t.EFF(43,"Notes"),t.k0s(),t.nrm(44,"textarea",17),t.k0s()()(),t.j41(45,"mat-dialog-actions",18)(46,"button",19),t.EFF(47,"Annuler"),t.k0s(),t.j41(48,"button",20),t.bIt("click",function(){return i.onSubmit()}),t.EFF(49," Enregistrer "),t.k0s()()),2&a){const l=t.sdS(20);t.R7$(1),t.SpI("",i.isEdit?t.bMT(2,5,"COMMON.EDIT"):t.bMT(3,7,"COMMON.ADD")," Record"),t.R7$(3),t.Y8G("formGroup",i.form),t.R7$(13),t.Y8G("matDatepicker",l),t.R7$(1),t.Y8G("for",l),t.R7$(30),t.Y8G("disabled",i.form.invalid||i.loading)}},dependencies:[r.me,r.BC,r.cb,r.j4,r.JD,f.$z,d.tx,d.BI,d.Yi,d.E7,h.rl,h.nJ,h.yw,v.fg,R.VO,H.wT,u.Vh,u.bZ,u.bU,E.D9],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;min-width:400px;padding-top:16px}"]})}}return e})();function N(e,s){1&e&&(t.j41(0,"div",14),t.nrm(1,"mat-spinner"),t.k0s())}function $(e,s){1&e&&(t.j41(0,"th",15),t.EFF(1," Date "),t.k0s())}function S(e,s){if(1&e&&(t.j41(0,"td",16),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&e){const o=s.$implicit;t.R7$(1),t.SpI(" ",t.bMT(2,1,o.diagnosis_date)," ")}}function L(e,s){1&e&&(t.j41(0,"th",15),t.EFF(1," ID "),t.k0s())}function V(e,s){if(1&e&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&e){const o=s.$implicit;t.R7$(1),t.SpI(" ",o.ear_tag," ")}}function x(e,s){1&e&&(t.j41(0,"th",15),t.EFF(1," Diagnostic "),t.k0s())}function y(e,s){if(1&e&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&e){const o=s.$implicit;t.R7$(1),t.SpI(" ",o.diagnosis," ")}}function M(e,s){1&e&&(t.j41(0,"th",15),t.EFF(1," Statut "),t.k0s())}function A(e,s){if(1&e&&(t.j41(0,"td",16)(1,"mat-chip",17),t.EFF(2),t.k0s()()),2&e){const o=s.$implicit;t.R7$(1),t.Y8G("color","ACTIVE"===o.status?"warn":"primary"),t.R7$(1),t.SpI(" ",o.status," ")}}function G(e,s){1&e&&(t.j41(0,"th",15),t.EFF(1," Actions "),t.k0s())}function Y(e,s){if(1&e){const o=t.RV6();t.j41(0,"td",16)(1,"button",18),t.bIt("click",function(){const l=t.eBV(o).$implicit,J=t.XpG();return t.Njj(J.openForm(l))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()()()}}function O(e,s){1&e&&t.nrm(0,"tr",19)}function U(e,s){1&e&&t.nrm(0,"tr",20)}const X=[{path:"",component:(()=>{class e{constructor(o,a){this.healthService=o,this.dialog=a,this.records=[],this.displayedColumns=["date","ear_tag","diagnosis","status","actions"],this.loading=!1}ngOnInit(){this.loadRecords()}loadRecords(){this.loading=!0,this.healthService.getAllRecords().subscribe({next:o=>{this.records=o.records,this.loading=!1},error:o=>{console.error(o),this.loading=!1}})}openForm(o){this.dialog.open(b,{width:"500px",data:o}).afterClosed().subscribe(i=>{i&&this.loadRecords()})}static{this.\u0275fac=function(a){return new(a||e)(t.rXU(T),t.rXU(d.bZ))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-health-list"]],decls:29,vars:10,consts:[[1,"health-list-container"],[1,"header"],["mat-raised-button","","color","primary",3,"click"],["class","loading-shade",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ear_tag"],["matColumnDef","diagnosis"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"loading-shade"],["mat-header-cell",""],["mat-cell",""],[3,"color"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"button",2),t.bIt("click",function(){return i.openForm()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.EFF(8),t.nI1(9,"translate"),t.k0s()(),t.DNE(10,N,2,0,"div",3),t.j41(11,"table",4),t.qex(12,5),t.DNE(13,$,2,0,"th",6),t.DNE(14,S,3,3,"td",7),t.bVm(),t.qex(15,8),t.DNE(16,L,2,0,"th",6),t.DNE(17,V,2,1,"td",7),t.bVm(),t.qex(18,9),t.DNE(19,x,2,0,"th",6),t.DNE(20,y,2,1,"td",7),t.bVm(),t.qex(21,10),t.DNE(22,M,2,0,"th",6),t.DNE(23,A,3,2,"td",7),t.bVm(),t.qex(24,11),t.DNE(25,G,2,0,"th",6),t.DNE(26,Y,4,0,"td",7),t.bVm(),t.DNE(27,O,1,0,"tr",12),t.DNE(28,U,1,0,"tr",13),t.k0s()()),2&a&&(t.R7$(3),t.JRh(t.bMT(4,6,"NAV.HEALTH")),t.R7$(5),t.SpI(" ",t.bMT(9,8,"COMMON.ADD")," "),t.R7$(2),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("dataSource",i.records),t.R7$(16),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",i.displayedColumns))},dependencies:[p.bT,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,f.$z,f.iY,D.An,k.Jl,j.LG,p.vh,E.D9]})}}return e})()}];let B=(()=>{class e{static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[p.MD,I.iI.forChild(X),E.h,r.X1,c.tP,f.Hl,D.m_,d.hM,h.RG,v.fS,R.Ve,u.X6,k.YN,j.D6]})}}return e})()}}]);